# ESP8266开发记录

---


## 项目材料

ESP8266-12E开发板一块

- ESP8266是一款物联网WiFi芯片(MCU)，常见型号有ESP-01到ESP-13等，每个型号的引脚和功能不同。

SSD1306屏幕一块

- I2C接口的显示屏幕，在Github上有开源驱动的驱动程序

---


## 项目功能介绍

- 连接指定WIFI
- 通过NTP服务获取时间并在屏幕上显示
- 通过心知天气提供的API，获取本地实时天气并显示

---


## 开发环境及配置

ESP8266常见开发环境有Arduino IDE和ESP8266 SDK两种。项目使用Arduino IDE这一集成开发环境，优点在于Arduino IDE在安装ESP8266函数库以及串口调试都更为容易。而ESP8266 SDK是乐鑫科技提供的开发工具，需要在Linux下编译开发套件并且需要单独下载串口调试工具等软件，配置相对麻烦。

### Arduino IDE配置

1. 下载 [Arduino IDE](https://www.arduino.cc/en/software)

2. 打开软件->文件->首选项->附加开发板管理器地址，添加
	
	```html
	http://arduino.esp8266.com/stable/package_esp8266com_index.json
	```
	添加完成后，点击好。
![](images\arduino_setting1.png)
	
3. 在Arduino IDE中点击工具->开发板->开发板管理器,在开发板管理器里面搜索esp8266并进行安装
  ![](images\arduino_setting2.png)

4. 在Arduino IDE的开发板菜单中找到“NodeMCU开发板”，选择ESP8266-12E
  ![](images\arduino_setting3.png)

5. 将esp8266通过数据线接入电脑，右键此电脑->管理->设备管理器->端口，查找到开发板的端口号
  ![](images\arduino_setting4.png)

6. 在Arduino IDE中点击工具->端口，选择上面的端口
  ![](images\arduino_setting5.png)

7. 通过Blink实例程序，验证是否搭建完成开发环境
  点击文件->示例->Basics->Blink
  ![](images\arduino_setting6.png)
  点击上传按钮，等待一分钟左右，可以观察到esp8266开发板上的led闪烁证明开发环境搭建完成。

---


## 依赖的第三方库
在Arduino IDE中点击工具->管理库，添加NTP库与SSD1306库
![](images\lib1.png)
![](images\lib2.png)

---

## 配置项目
- 配置WiFi信息，用你的WiFiSSID和密码替换***
	![](images\wifi_setting.png)
- 配置心知天气相关信息,用你的私钥替换***,location替换为你所在城市，如上海为shanghai，北京为beijing等，具体可参考[心知天气官方开发者文档](https://docs.seniverse.com/api/start/common.html#%E5%9C%B0%E7%82%B9-location)
	![](images\weather_setting.png)
**注意：如果你不关心代码是的问题，至此可以直接在Arduino IDE中点击上传按钮了**

---
---
---

## Weather类介绍

```c++
class Weather
{
    public:
    	void config(String key,String location,String language ,String unit); //传入API需要的参数
    	String getText(); //获取天气
    	String getTemperature()； //获取温度
        String getDate(); //获取日期
}
```

